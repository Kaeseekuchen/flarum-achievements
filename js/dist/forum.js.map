{"version":3,"sources":["webpack://@malago/flarum-achievements/webpack/bootstrap","webpack://@malago/flarum-achievements/./forum.js","webpack://@malago/flarum-achievements/./node_modules/@babel/runtime/helpers/esm/extends.js","webpack://@malago/flarum-achievements/./node_modules/@babel/runtime/helpers/esm/inheritsLoose.js","webpack://@malago/flarum-achievements/./node_modules/@babel/runtime/helpers/esm/setPrototypeOf.js","webpack://@malago/flarum-achievements/./src/common/models/Achievement.js","webpack://@malago/flarum-achievements/./src/common/models/AchievementUser.js","webpack://@malago/flarum-achievements/./src/common/registerModels.js","webpack://@malago/flarum-achievements/./src/forum/components/AchievementsPage.js","webpack://@malago/flarum-achievements/./src/forum/index.js","webpack://@malago/flarum-achievements/./src/forum/modals/NewAchievementModal.js","webpack://@malago/flarum-achievements/external \"flarum.core.compat['Model']\"","webpack://@malago/flarum-achievements/external \"flarum.core.compat['app']\"","webpack://@malago/flarum-achievements/external \"flarum.core.compat['common/Application']\"","webpack://@malago/flarum-achievements/external \"flarum.core.compat['common/components/Page']\"","webpack://@malago/flarum-achievements/external \"flarum.core.compat['components/Button']\"","webpack://@malago/flarum-achievements/external \"flarum.core.compat['components/CommentPost']\"","webpack://@malago/flarum-achievements/external \"flarum.core.compat['components/IndexPage']\"","webpack://@malago/flarum-achievements/external \"flarum.core.compat['components/Link']\"","webpack://@malago/flarum-achievements/external \"flarum.core.compat['components/LinkButton']\"","webpack://@malago/flarum-achievements/external \"flarum.core.compat['components/LoadingIndicator']\"","webpack://@malago/flarum-achievements/external \"flarum.core.compat['components/Modal']\"","webpack://@malago/flarum-achievements/external \"flarum.core.compat['components/Page']\"","webpack://@malago/flarum-achievements/external \"flarum.core.compat['components/Tooltip']\"","webpack://@malago/flarum-achievements/external \"flarum.core.compat['components/UserCard']\"","webpack://@malago/flarum-achievements/external \"flarum.core.compat['extend']\"","webpack://@malago/flarum-achievements/external \"flarum.core.compat['helpers/humanTime']\"","webpack://@malago/flarum-achievements/external \"flarum.core.compat['helpers/icon']\"","webpack://@malago/flarum-achievements/external \"flarum.core.compat['helpers/listItems']\"","webpack://@malago/flarum-achievements/external \"flarum.core.compat['models/User']\"","webpack://@malago/flarum-achievements/external \"flarum.core.compat['utils/ItemList']\"","webpack://@malago/flarum-achievements/external \"flarum.core.compat['utils/mixin']\""],"names":["Achievement","Model","prototype","id","attribute","name","description","computation","points","rectangle","image","active","hidden","AchievementUser","achievement_id","user_id","registerModels","User","achievements","hasMany","achievement_user","app","store","models","AchievementsPage","oninit","vnode","loading","session","user","m","route","set","achievements_ids","data","resources","map","item","type","push","achievements_all","html_user","html_all","hidden_count","find","then","val","split","html","includes","style","translator","trans","indexOf","parseFloat","redraw","view","IndexPage","hero","listItems","sidebarItems","toArray","trust","oncreate","setTitle","setTitleCount","Page","require","initializers","add","routes","path","component","extend","items","UserCard","element","here","forum","list","attrs","className","undefined","Object","keys","forEach","obj","attributes","children","Tooltip","text","length","CommentPost","comment","post","isHidden","index","Application","promise","new_achievements","JSON","parse","modal","show","NewAchievementModal","setTimeout","only_new_achievements","i","save","title","fields","ItemList","icon","Button","onclick","hide","bind","footer","content","Modal"],"mappings":"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","file":"forum.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./forum.js\");\n","export * from './src/forum';","export default function _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}","import setPrototypeOf from \"./setPrototypeOf.js\";\nexport default function _inheritsLoose(subClass, superClass) {\n  subClass.prototype = Object.create(superClass.prototype);\n  subClass.prototype.constructor = subClass;\n  setPrototypeOf(subClass, superClass);\n}","export default function _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}","/*\n *  Achievements Extension for Flarum\n *  Author: Miguel A. Lago\n *\n *  This program is free software: you can redistribute it and/or modify\n *  it under the terms of the GNU General Public License as published by\n *  the Free Software Foundation, either version 3 of the License, or\n *  (at your option) any later version.\n *\n *  This program is distributed in the hope that it will be useful,\n *  but WITHOUT ANY WARRANTY; without even the implied warranty of\n *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n *  GNU General Public License for more details.\n */\n\nimport Model from 'flarum/Model';\nimport mixin from 'flarum/utils/mixin';\n\nexport default class Achievement extends Model {}\n \nObject.assign(Achievement.prototype, {\n  id: Model.attribute(\"id\"),\n  name: Model.attribute(\"name\"),\n  description: Model.attribute('description'),\n  computation: Model.attribute('computation'),\n  points: Model.attribute('points'),\n  rectangle: Model.attribute('rectangle'),\n  image: Model.attribute('image'),\n  new: Model.attribute('new'),\n  active: Model.attribute('active'),\n  hidden: Model.attribute('hidden'),\n});","/*\n *  Achievements Extension for Flarum\n *  Author: Miguel A. Lago\n *\n *  This program is free software: you can redistribute it and/or modify\n *  it under the terms of the GNU General Public License as published by\n *  the Free Software Foundation, either version 3 of the License, or\n *  (at your option) any later version.\n *\n *  This program is distributed in the hope that it will be useful,\n *  but WITHOUT ANY WARRANTY; without even the implied warranty of\n *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n *  GNU General Public License for more details.\n */\n\nimport Model from 'flarum/Model';\n\nexport default class AchievementUser extends Model {}\n\nObject.assign(AchievementUser.prototype, {\n  achievement_id: Model.attribute(\"achievement_id\"),\n  user_id: Model.attribute('user_id'),\n  new: Model.attribute('new')\n});","/*\n *  Achievements Extension for Flarum\n *  Author: Miguel A. Lago\n *\n *  This program is free software: you can redistribute it and/or modify\n *  it under the terms of the GNU General Public License as published by\n *  the Free Software Foundation, either version 3 of the License, or\n *  (at your option) any later version.\n *\n *  This program is distributed in the hope that it will be useful,\n *  but WITHOUT ANY WARRANTY; without even the implied warranty of\n *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n *  GNU General Public License for more details.\n */\n\nimport Model from \"flarum/Model\";\nimport User from \"flarum/models/User\";\nimport Achievement from \"./models/Achievement\";\nimport AchievementUser from \"./models/AchievementUser\";\n\nexport default function registerModels() {\n  User.prototype.achievements = Model.hasMany('achievements','achievement_user');\n  User.prototype.achievement_user = Model.hasMany('achievement_user');\n\n  app.store.models.achievements = Achievement;\n  app.store.models.achievement_user = AchievementUser;\n}","import Page from 'flarum/common/components/Page';\r\nimport IndexPage from 'flarum/components/IndexPage';\r\nimport Link from 'flarum/components/Link';\r\nimport LoadingIndicator from 'flarum/components/LoadingIndicator';\r\nimport listItems from 'flarum/helpers/listItems';\r\nimport humanTime from 'flarum/helpers/humanTime';\r\nimport Tooltip from \"flarum/components/Tooltip\";\r\n\r\nexport default class AchievementsPage extends Page {\r\n  oninit(vnode) {\r\n    this.loading = true;\r\n    super.oninit(vnode);\r\n    if (!app.session.user) {\r\n        m.route.set('/');\r\n    }\r\n    this.achievements_ids = [];\r\n    app.data.resources.map(item => { if(item.type==\"achievements\") this.achievements_ids.push(item.id)});\r\n    this.achievements_all = [];\r\n    this.html_user = \"\";\r\n    this.html_all = \"\";\r\n    this.points = 0;\r\n    this.hidden_count = 0;\r\n    app.store.find('achievements').then(val => {\r\n      this.achievements_all = val;\r\n\r\n      this.achievements_all.map(item => {\r\n        var rectangle = item.rectangle().split(',');\r\n        var html = \"\";\r\n        if (item.image().includes(\"http\")) {\r\n          var style = \"background:url(\" + item.image() + \");\\\r\n            background-position:-\"+ rectangle[0] + \"px -\" + rectangle[1] + \"px;\\\r\n            height:\"+ rectangle[2] + \"px;\\\r\n            width:\"+ rectangle[3] + \"px;\";\r\n          html = '<li>\\\r\n              <div class=\"AchievementsList-Item\">\\\r\n                <div class=\"Badge Achievement\" style=\"'+ style + '\" data-toggle=\"tooltip\" title=' + item.name() +'></div>\\\r\n                  <table class=\"AchievementsList-info\"><tr><td class=\"AchievementsList-name\">'+ item.name() + '</td><td class=\"AchievementsList-points\">' + app.translator.trans(\"malago-achievements.forum.achievement_points\") + \": \" + item.points() +'</td></tr></table>\\\r\n                  <div class=\"AchievementsList-description\">'+ item.description() +'</div>\\\r\n              </div>\\\r\n            </li>';\r\n        } else {\r\n          html='<li>\\\r\n              <div class=\"AchievementsList-Item\">\\\r\n                <div class=\"Badge Achievement--Icon\"><i class=\"icon ' + item.image()+'\"></i></div>\\\r\n                <table class=\"AchievementsList-info\"><tr><td class=\"AchievementsList-name\">'+ item.name() + '</td><td class=\"AchievementsList-points\">' + app.translator.trans(\"malago-achievements.forum.achievement_points\") + \": \" + item.points() +'</td></tr></table>\\\r\n                <div class=\"AchievementsList-description\">'+ item.description() +'</div>\\\r\n              </div>\\\r\n            </li>';\r\n        }\r\n        \r\n        if (this.achievements_ids.indexOf(item.data.id) !== -1) {\r\n          this.html_user += html;\r\n          this.points += parseFloat(item.points());\r\n        }else if (item.hidden() == 0)\r\n          this.html_all += html;\r\n        else\r\n          this.hidden_count += 1;\r\n        \r\n      });\r\n\r\n      this.loading = false;\r\n      m.redraw();\r\n    });\r\n    // this.achievements = app.forum.data.relationships.achievements_all.data;\r\n  }\r\n  view() {\r\n    if (this.loading) {\r\n      return <LoadingIndicator />;\r\n    }\r\n    return (\r\n      <div className=\"IndexPage\">\r\n        {IndexPage.prototype.hero()}\r\n        <div className=\"container\">\r\n          <div className=\"sideNavContainer\">\r\n            <nav className=\"IndexPage-nav sideNav\">\r\n              <ul>{listItems(IndexPage.prototype.sidebarItems().toArray())}</ul>\r\n            </nav>\r\n            <div className=\"IndexPage-results sideNavOffset\">\r\n              <h2>{app.translator.trans(\"malago-achievements.forum.your_achievements\")}</h2>\r\n              <div className=\"AchievementsList\">\r\n                <ul className=\"AchievementsList-achievements\">\r\n                  {m.trust(this.html_user)}\r\n                  <li>\r\n                    <div class=\"AchievementsList-Item\">\r\n                      <div className=\"AchievementsList-points AchievementsList-total\" style=\"color: black; border: 2px solid black;\">{app.translator.trans(\"malago-achievements.forum.achievement_total_points\") + \": \"+this.points}</div>\r\n                    </div>  \r\n                  </li>\r\n                  </ul>\r\n              </div>\r\n                          \r\n              <h2>{app.translator.trans(\"malago-achievements.forum.other_achievements\")}</h2>\r\n              <div className=\"AchievementsList AchievementsList-Other\">\r\n                <ul className=\"AchievementsList-achievements\">\r\n                  {m.trust(this.html_all)}\r\n                  </ul>\r\n              </div>\r\n\r\n              <div className=\"AchievementsHidden\">{this.hidden_count>0?app.translator.trans(\"malago-achievements.forum.hidden_achievements\")+\": \"+this.hidden_count:\"\"}</div>\r\n\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n  oncreate(vnode) {\r\n    super.oncreate(vnode);\r\n\r\n    app.setTitle(app.translator.trans(\"malago-achievements.forum.list_heading\"));\r\n    app.setTitleCount(0);\r\n  }\r\n}","/*\n *  Achievements Extension for Flarum\n *  Author: Miguel A. Lago\n *\n *  This program is free software: you can redistribute it and/or modify\n *  it under the terms of the GNU General Public License as published by\n *  the Free Software Foundation, either version 3 of the License, or\n *  (at your option) any later version.\n *\n *  This program is distributed in the hope that it will be useful,\n *  but WITHOUT ANY WARRANTY; without even the implied warranty of\n *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n *  GNU General Public License for more details.\n */\n\nconst { default: registerModels } = require(\"../common/registerModels\");\n\nimport { extend } from 'flarum/extend';\nimport CommentPost from 'flarum/components/CommentPost';\nimport Application from 'flarum/common/Application';\nimport NewAchievementModal from './modals/NewAchievementModal';\nimport IndexPage from 'flarum/components/IndexPage'\nimport Page from 'flarum/components/Page'\nimport AchievementsPage from './components/AchievementsPage'\nimport LinkButton from 'flarum/components/LinkButton';\nimport Tooltip from \"flarum/components/Tooltip\";\nimport UserCard from 'flarum/components/UserCard'\n\napp.initializers.add('malago-achievements', app => {\n  app.routes['achievements'] = { path: '/achievements', component: AchievementsPage };\n  extend(IndexPage.prototype, 'navItems', function (items) {\n    if (!app.session.user) {\n        return;\n    }\n    items.add('achievements', <LinkButton icon=\"fas fa-trophy\" href={app.route('achievements')}>\n      {app.translator.trans(\"malago-achievements.forum.list_heading\")}\n    </LinkButton>\n      , -11);\n  });\n  \n  registerModels();\n  \n  extend(UserCard.prototype, 'view', function (element) {\n    var points = 0;\n    //comment.children[0].children[2].children.splice(0,0, m(\"div.Achievements--User\"));\n    const here = app.forum.attribute('malago-achievements.show-user-card');\n    // var element = this.element;\n    // element.appendChild(m('div'));\n    // $(element).append(m(\"div\",\"HOLA\"));\n    //console.log(this.attrs.user);\n    var list = m(\"div.UserCard-Achievement-list\");\n    \n    if (here == \"1\" && element.attrs.className.includes(\"UserCard--popover\")) {\n      var achievements = this.attrs.user.achievements();\n      if (achievements !== undefined) {\n        Object.keys(achievements).forEach(obj => {\n          var item = achievements[obj].data.attributes;\n          var rectangle = item.rectangle.split(',');\n          if (item.image.includes(\"http\")) {\n            var style = \"background:url(\" + item.image + \");\\\n              background-position:-\"+ rectangle[0] + \"px -\" + rectangle[1] + \"px;\\\n              height:\"+ rectangle[2] + \"px;\\\n              width:\"+ rectangle[3] + \"px;\\\n              margin: -\"+ (rectangle[3] / 4 - 4) + \"px;\";\n            list.children.push(m(Tooltip, { text: item.name },\n              m(\"span.Badge.Achievement\", { style: style }, \"\"))\n            );\n          } else {\n            list.children.push(m(Tooltip, { text: item.name }, m(\"span.Badge.Achievement--Icon\",\n              m(\"i.icon.\" + item.image))\n            ));\n          }\n\n          points += item.points;\n        });\n        if (list.children.length > 0 && points > 0) {\n          list.children.push(m(Tooltip, { text: app.translator.trans(\"malago-achievements.forum.achievement_points\") }, m(\"span.Achievement--Points\", app.translator.trans(\n            \"malago-achievements.forum.achievement_points\") + \": \", m(\"span.Achievement--Points--Number\", points))));\n        }\n        element.children.push(list);\n      }\n    }\n  })\n\n  extend(CommentPost.prototype, 'view', function (comment) {\n    var points = 0;\n    //comment.children[0].children[2].children.splice(0,0, m(\"div.Achievements--User\"));\n    const here = app.forum.attribute('malago-achievements.show-post-footer');\n\n    if (here==\"1\" && !this.attrs.post.data.attributes.isHidden) {\n      this.attrs.post.data.attributes.achievements.forEach(function (item, index) {\n        var rectangle = item.rectangle.split(',');\n        if (item.image.includes(\"http\")) {\n          var style = \"background:url(\" + item.image + \");\\\n            background-position:-\"+ rectangle[0] + \"px -\" + rectangle[1] + \"px;\\\n            height:\"+ rectangle[2] + \"px;\\\n            width:\"+ rectangle[3] + \"px;\\\n            margin: -\"+ (rectangle[3] / 4 - 4) + \"px;\";            \n          comment.children[0].children[2].children[0].children.push(m(Tooltip,{text:item.name},\n            m(\"span.Badge.Achievement\", { style: style }, \"\"))\n          );\n        } else {\n          comment.children[0].children[2].children[0].children.push(m(Tooltip, { text: item.name }, m(\"span.Badge.Achievement--Icon\",\n            m(\"i.icon.\" + item.image))\n          ));\n        }\n\n        points += item.points;\n      });\n      if (comment.children[0].children[2].children[0].children.length>0 && points > 0) {\n          comment.children[0].children[2].children[0].children.push(m(Tooltip,{text:app.translator.trans(\"malago-achievements.forum.achievement_points\")},m(\"span.Achievement--Points\", app.translator.trans(\n            \"malago-achievements.forum.achievement_points\") + \": \",m(\"span.Achievement--Points--Number\", points))));\n      }\n    }\n  });\n\n  extend(Application.prototype, 'request', function (promise) {\n    if (promise) {\n      promise.then(function (data) {\n        if (data && data.new_achievements !== undefined && data.new_achievements !== null && JSON.parse(data.new_achievements).length > 0) {\n          app.modal.show(NewAchievementModal, { achievements: data.new_achievements });\n        }\n      });\n    }\n  });\n\n  extend(Page.prototype, 'oncreate', function (promise) {\n    if (app.session.user !== undefined) {\n      setTimeout(function () {\n        var new_achievements = app.session.user.achievements();\n\n        if (new_achievements !== undefined && new_achievements !== null && new_achievements.length > 0) {\n          var only_new_achievements = [];\n          for (var i = 0; i < new_achievements.length; i++) {\n            if (new_achievements[i].data.attributes.new == 1) {\n              only_new_achievements.push(new_achievements[i].data.attributes)\n              new_achievements[i].save({ new: 0, user_id: app.session.user.data.id });\n            }\n          }\n          if (only_new_achievements.length > 0)\n            app.modal.show(NewAchievementModal, { achievements: only_new_achievements });\n        }\n      }, 1000);\n    }\n  });\n\n});\n","/*\n *  Achievements Extension for Flarum\n *  Author: Miguel A. Lago\n *\n *  This program is free software: you can redistribute it and/or modify\n *  it under the terms of the GNU General Public License as published by\n *  the Free Software Foundation, either version 3 of the License, or\n *  (at your option) any later version.\n *\n *  This program is distributed in the hope that it will be useful,\n *  but WITHOUT ANY WARRANTY; without even the implied warranty of\n *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n *  GNU General Public License for more details.\n */\n\nimport app from 'flarum/app';\nimport icon from \"flarum/helpers/icon\";\nimport Modal from 'flarum/components/Modal';\nimport ItemList from \"flarum/utils/ItemList\";\nimport Button from \"flarum/components/Button\";\n\nexport default class NewAchievementModal extends Modal {\n\n\n    title() {\n        return app.translator.trans('malago-achievements.forum.new_achievement_title');\n    }\n\n    oninit(vnode) {\n        super.oninit(vnode);\n    }\n\n    fields() {\n        const items = new ItemList();\n        for (var i = 0; i < this.attrs.achievements.length; i++) {\n            var rectangle = this.attrs.achievements[i].rectangle.split(',');\n\n            if (this.attrs.achievements[i].image.includes(\"http\")) {\n                var style = \"background:url(\" + this.attrs.achievements[i].image + \");\\\n                    background-position:-\"+ rectangle[0] + \"px -\" + rectangle[1] + \"px;\\\n                    height:\"+ rectangle[2] + \"px;\\\n                    width:\"+ rectangle[3] + \"px;\";\n\n                items.add(\n                    \"image\" + i,\n                    <div className=\"Form-group\">\n                        <span class='Badge Achievement' style={style}></span>\n                    </div>,\n                    -10\n                );\n            } else {\n                items.add(\n                    \"image\" + i,\n                    <div className=\"Form-group\">\n                        <span class='Badge Achievement--Icon'>{icon(this.attrs.achievements[i].image)}</span>\n                    </div>,\n                    -10\n                );\n            }\n\n            items.add(\n                \"name\" + i,\n                <div className=\"Form-group\">\n                    <h1>{this.attrs.achievements[i].name}</h1>\n                </div>,\n                -10\n            );\n\n            items.add(\n                \"description\" + i,\n                <div className=\"Form-group\">\n                    <h3>{this.attrs.achievements[i].description}</h3>\n                </div>,\n                -10\n            );\n        }\n\n        items.add(\n            \"close\",\n            <div className=\"NewAchievementModal--Button\">\n                {Button.component(\n                    {\n                        type: \"button\",\n                        className: \"Button Button--primary\",\n                        onclick: this.hide.bind(this),\n                    },\n                    app.translator.trans(\n                        \"malago-achievements.forum.new_achievement_close\"\n                    )\n                )}\n\n            </div>,\n            -10\n        );\n\n        return items;\n    }\n\n    // Hide the footer completely\n    footer() {\n        return null;\n    }\n\n    content() {\n        if (this.loading) {\n            return (\n                <div className=\"Modal-body\">\n                    <div className=\"Form\">\n                        <div className=\"container\">\n                            <LoadingIndicator />\n                        </div>\n                    </div>\n                </div>\n            );\n        }\n\n        return (\n            <div className=\"Modal-body\">\n                <div className=\"Modal--New-Achievement\">{this.fields().toArray()}</div>\n            </div>\n        );\n    }\n\n    // Instead of hitting /register (which would change which user is connected in this session)\n    // We just hit the API that's already used behind the scenes when registering\n    // Doing it this way skips connecting the new account and just returns the new user data\n    // onsubmit(e) {\n    //     e.preventDefault();\n\n    //     this.loading = true;\n\n    //     app.request({\n    //         url: app.forum.attribute('apiUrl') + '/users',\n    //         method: 'POST',\n    //         body: {\n    //             data: {\n    //                 attributes: this.submitData(),\n    //             },\n    //         },\n    //         errorHandler: this.onerror.bind(this)\n    //     }).then(\n    //         payload => {\n    //             const user = app.store.pushPayload(payload);\n\n    //             // Add the missing groups relationship we can't include from the CreateUserController\n    //             // Without this there's an error trying to access the user edit modal just after the redirect to the profile\n    //             user.pushData({\n    //                 relationships: {\n    //                     groups: {\n    //                         data: [],\n    //                     },\n    //                 },\n    //             });\n\n    //             m.route.set(app.route.user(user));\n    //         },\n    //         this.loaded.bind(this)\n    //     );\n    // }\n}","module.exports = flarum.core.compat['Model'];","module.exports = flarum.core.compat['app'];","module.exports = flarum.core.compat['common/Application'];","module.exports = flarum.core.compat['common/components/Page'];","module.exports = flarum.core.compat['components/Button'];","module.exports = flarum.core.compat['components/CommentPost'];","module.exports = flarum.core.compat['components/IndexPage'];","module.exports = flarum.core.compat['components/Link'];","module.exports = flarum.core.compat['components/LinkButton'];","module.exports = flarum.core.compat['components/LoadingIndicator'];","module.exports = flarum.core.compat['components/Modal'];","module.exports = flarum.core.compat['components/Page'];","module.exports = flarum.core.compat['components/Tooltip'];","module.exports = flarum.core.compat['components/UserCard'];","module.exports = flarum.core.compat['extend'];","module.exports = flarum.core.compat['helpers/humanTime'];","module.exports = flarum.core.compat['helpers/icon'];","module.exports = flarum.core.compat['helpers/listItems'];","module.exports = flarum.core.compat['models/User'];","module.exports = flarum.core.compat['utils/ItemList'];","module.exports = flarum.core.compat['utils/mixin'];"],"sourceRoot":""}