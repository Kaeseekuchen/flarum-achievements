module.exports=function(t){var e={};function n(a){if(e[a])return e[a].exports;var i=e[a]={i:a,l:!1,exports:{}};return t[a].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=t,n.c=e,n.d=function(t,e,a){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(n.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(a,i,function(e){return t[e]}.bind(null,i));return a},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=35)}([function(t,e){t.exports=flarum.core.compat.Model},,function(t,e,n){"use strict";function a(t,e){return(a=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function i(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,a(t,e)}n.d(e,"a",(function(){return i}))},function(t,e,n){"use strict";function a(){return(a=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t}).apply(this,arguments)}n.d(e,"a",(function(){return a}))},function(t,e){t.exports=flarum.core.compat["components/Button"]},function(t,e){t.exports=flarum.core.compat["components/LoadingIndicator"]},function(t,e){t.exports=flarum.core.compat["models/User"]},function(t,e){t.exports=flarum.core.compat["helpers/icon"]},function(t,e){t.exports=flarum.core.compat["components/Modal"]},function(t,e){t.exports=flarum.core.compat["utils/ItemList"]},function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));var a=n(3),i=n(2),o=n(0),s=n.n(o),r=(n(15),function(t){function e(){return t.apply(this,arguments)||this}return Object(i.a)(e,t),e}(s.a));Object(a.a)(r.prototype,{id:s.a.attribute("id"),name:s.a.attribute("name"),description:s.a.attribute("description"),computation:s.a.attribute("computation"),points:s.a.attribute("points"),rectangle:s.a.attribute("rectangle"),image:s.a.attribute("image"),new:s.a.attribute("new"),active:s.a.attribute("active"),hidden:s.a.attribute("hidden")})},function(t,e){t.exports=flarum.core.compat["components/IndexPage"]},function(t,e){t.exports=flarum.core.compat.extend},function(t,e){t.exports=flarum.core.compat["components/Tooltip"]},function(t,e,n){"use strict";n.r(e),n.d(e,"default",(function(){return u}));var a=n(0),i=n.n(a),o=n(6),s=n.n(o),r=n(10),c=n(3),m=n(2),l=function(t){function e(){return t.apply(this,arguments)||this}return Object(m.a)(e,t),e}(i.a);function u(){s.a.prototype.achievements=i.a.hasMany("achievements","achievement_user"),s.a.prototype.achievement_user=i.a.hasMany("achievement_user"),app.store.models.achievements=r.a,app.store.models.achievement_user=l}Object(c.a)(l.prototype,{achievement_id:i.a.attribute("achievement_id"),user_id:i.a.attribute("user_id"),new:i.a.attribute("new")})},function(t,e){t.exports=flarum.core.compat["utils/mixin"]},function(t,e){t.exports=flarum.core.compat.app},,function(t,e){t.exports=flarum.core.compat["components/CommentPost"]},function(t,e){t.exports=flarum.core.compat["common/Application"]},function(t,e){t.exports=flarum.core.compat["components/Page"]},function(t,e){t.exports=flarum.core.compat["common/components/Page"]},function(t,e){t.exports=flarum.core.compat["helpers/listItems"]},function(t,e){t.exports=flarum.core.compat["components/LinkButton"]},,,,function(t,e){t.exports=flarum.core.compat["components/Post"]},function(t,e){t.exports=flarum.core.compat["components/PostUser"]},function(t,e){t.exports=flarum.core.compat["components/ModalManager"]},function(t,e){t.exports=flarum.core.compat["components/TextEditor"]},function(t,e){t.exports=flarum.core.compat["components/PostEdited"]},function(t,e){t.exports=flarum.core.compat["components/Link"]},function(t,e){t.exports=flarum.core.compat["helpers/humanTime"]},,function(t,e,n){"use strict";n.r(e);var a=n(12),i=n(18),o=n.n(i),s=(n(27),n(28),n(29),n(0),n(6),n(30),n(31),n(10),n(19)),r=n.n(s),c=n(2),l=n(16),u=n.n(l),p=n(7),d=n.n(p),h=n(8),v=n.n(h),f=n(9),g=n.n(f),b=n(4),x=n.n(b),y=function(t){function e(){return t.apply(this,arguments)||this}Object(c.a)(e,t);var n=e.prototype;return n.title=function(){return u.a.translator.trans("malago-achievements.forum.new_achievement_title")},n.oninit=function(e){t.prototype.oninit.call(this,e)},n.fields=function(){for(var t=new g.a,e=0;e<this.attrs.achievements.length;e++){var n=this.attrs.achievements[e].rectangle.split(",");if(this.attrs.achievements[e].image.includes("http")){var a="background:url("+this.attrs.achievements[e].image+");                    background-position:-"+n[0]+"px -"+n[1]+"px;                    height:"+n[2]+"px;                    width:"+n[3]+"px;";t.add("image"+e,m("div",{className:"Form-group"},m("span",{class:"Badge Achievement",style:a})),-10)}else t.add("image"+e,m("div",{className:"Form-group"},m("span",{class:"Badge Achievement--Icon"},d()(this.attrs.achievements[e].image))),-10);t.add("name"+e,m("div",{className:"Form-group"},m("h1",null,this.attrs.achievements[e].name)),-10),t.add("description"+e,m("div",{className:"Form-group"},m("h3",null,this.attrs.achievements[e].description)),-10)}return t.add("close",m("div",{className:"NewAchievementModal--Button"},x.a.component({type:"button",className:"Button Button--primary",onclick:this.hide.bind(this)},u.a.translator.trans("malago-achievements.forum.new_achievement_close"))),-10),t},n.footer=function(){return null},n.content=function(){return this.loading?m("div",{className:"Modal-body"},m("div",{className:"Form"},m("div",{className:"container"},m(LoadingIndicator,null)))):m("div",{className:"Modal-body"},m("div",{className:"Modal--New-Achievement"},this.fields().toArray()))},e}(v.a),_=n(11),A=n.n(_),N=n(20),O=n.n(N),w=n(21),L=n.n(w),j=(n(32),n(5)),P=n.n(j),I=n(22),M=n.n(I),k=(n(33),n(13),function(t){function e(){return t.apply(this,arguments)||this}Object(c.a)(e,t);var n=e.prototype;return n.oninit=function(e){var n=this;this.loading=!0,t.prototype.oninit.call(this,e),this.achievements_ids=[],app.data.resources.map((function(t){"achievements"==t.type&&n.achievements_ids.push(t.id)})),this.achievements_all=[],this.html_user="",this.html_all="",this.points=0,this.hidden_count=0,app.store.find("achievements").then((function(t){n.achievements_all=t,n.achievements_all.map((function(t){var e=t.rectangle().split(","),a="";(n.points+=t.points(),t.image().includes("http"))?a='<li>              <div class="AchievementsList-Item">                <div class="Badge Achievement" style="'+("background:url("+t.image()+");            background-position:-"+e[0]+"px -"+e[1]+"px;            height:"+e[2]+"px;            width:"+e[3]+"px;")+'" data-toggle="tooltip" title='+t.name()+'></div>                  <table class="AchievementsList-info"><tr><td class="AchievementsList-name">'+t.name()+'</td><td class="AchievementsList-points">'+app.translator.trans("malago-achievements.forum.achievement_points")+": "+t.points()+'</td></tr></table>                  <div class="AchievementsList-description">'+t.description()+"</div>              </div>            </li>":a='<li>              <div class="AchievementsList-Item">                <div class="Badge Achievement--Icon"><i class="icon '+t.image()+'"></i></div>                <table class="AchievementsList-info"><tr><td class="AchievementsList-name">'+t.name()+'</td><td class="AchievementsList-points">'+app.translator.trans("malago-achievements.forum.achievement_points")+": "+t.points()+'</td></tr></table>                <div class="AchievementsList-description">'+t.description()+"</div>              </div>            </li>";console.log(t.hidden()),-1!==n.achievements_ids.indexOf(t.data.id)?n.html_user+=a:0==t.hidden()?n.html_all+=a:n.hidden_count+=1})),n.loading=!1,m.redraw()}))},n.view=function(){return this.loading?m(P.a,null):m("div",{className:""},A.a.prototype.hero(),m("div",{className:"container"},m("div",{className:"sideNavContainer"},m("nav",{className:"IndexPage-nav sideNav"},m("ul",null,M()(A.a.prototype.sidebarItems().toArray()))),m("div",{className:"IndexPage-results sideNavOffset"},m("h2",null,app.translator.trans("malago-achievements.forum.your_achievements")),m("div",{className:"AchievementsList"},m("ul",{className:"AchievementsList-achievements"},m.trust(this.html_user),m("li",null,m("div",{class:"AchievementsList-Item"},m("div",{className:"AchievementsList-points AchievementsList-total",style:"color: black; border: 2px solid black;"},app.translator.trans("malago-achievements.forum.achievement_total_points")+": "+this.points))))),m("h2",null,app.translator.trans("malago-achievements.forum.other_achievements")),m("div",{className:"AchievementsList"},m("ul",{className:"AchievementsList-achievements"},m.trust(this.html_all))),m("div",{className:"AchievementsHidden"},this.hidden_count>0?app.translator.trans("malago-achievements.forum.hidden_achievements")+": "+this.hidden_count:"")))))},n.oncreate=function(e){t.prototype.oncreate.call(this,e),app.setTitle(app.translator.trans("malago-achievements.forum.list_heading")),app.setTitleCount(0)},e}(L.a)),B=n(23),T=n.n(B),F=n(14).default;app.initializers.add("malago-achievements",(function(t){t.routes.achievements={path:"/achievements",component:k},Object(a.extend)(A.a.prototype,"navItems",(function(e){e.add("achievements",m(T.a,{icon:"fas fa-trophy",href:t.route("achievements")},t.translator.trans("malago-achievements.forum.list_heading")),-11)})),F(),Object(a.extend)(o.a.prototype,"oncreate",(function(e){var n="",a=0;this.attrs.post.data.attributes.isHidden||(this.attrs.post.data.attributes.achievements.forEach((function(t,e){var i=t.rectangle.split(",");if(t.image.includes("http")){var o="background:url("+t.image+");            background-position:-"+i[0]+"px -"+i[1]+"px;            height:"+i[2]+"px;            width:"+i[3]+"px;            margin: -"+(i[3]/4-4)+"px;";n+="<span class='Badge Achievement' style='"+o+"' data-toggle='tooltip' title='"+t.name+"'></span>"}else n+="<span class='Badge Achievement--Icon' data-toggle='tooltip' title='"+t.name+"'><i class='icon "+t.image+"'></i></span>";a+=t.points})),""!==n&&(a>0&&(n+="<span class='Achievement--Points' data-toggle='tooltip' title='"+t.translator.trans("malago-achievements.forum.achievement_points")+"'>"+t.translator.trans("malago-achievements.forum.achievement_points")+": <span class='Achievement--Points--Number'>"+a+"</span></span>"),$(this.element).find(".Post-body").after("<div class='Achievements--User'>"+n+"</div>"),$(".Achievement--Icon").tooltip(),$(".Achievement").tooltip(),$(".Achievement--Points").tooltip()))})),Object(a.extend)(r.a.prototype,"request",(function(e){e&&e.then((function(e){e&&void 0!==e.new_achievements&&null!==e.new_achievements&&e.new_achievements.length>0&&t.modal.show(y,{achievements:e.new_achievements})}))})),Object(a.extend)(O.a.prototype,"oncreate",(function(e){void 0!==t.session.user&&setTimeout((function(){var e=t.session.user.achievements();if(null!=e&&e.length>0){for(var n=[],a=0;a<e.length;a++)1==e[a].data.attributes.new&&(n.push(e[a].data.attributes),e[a].save({new:0,user_id:t.session.user.data.id}));n.length>0&&t.modal.show(y,{achievements:n})}}),1e3)}))}))}]);
//# sourceMappingURL=forum.js.map