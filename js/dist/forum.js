module.exports=function(t){var e={};function n(o){if(e[o])return e[o].exports;var a=e[o]={i:o,l:!1,exports:{}};return t[o].call(a.exports,a,a.exports,n),a.l=!0,a.exports}return n.m=t,n.c=e,n.d=function(t,e,o){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)n.d(o,a,function(e){return t[e]}.bind(null,a));return o},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=29)}([function(t,e){t.exports=flarum.core.compat.Model},,function(t,e,n){"use strict";function o(t,e){return(o=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function a(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,o(t,e)}n.d(e,"a",(function(){return a}))},function(t,e,n){"use strict";function o(){return(o=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t}).apply(this,arguments)}n.d(e,"a",(function(){return o}))},function(t,e){t.exports=flarum.core.compat["components/Button"]},function(t,e){t.exports=flarum.core.compat["models/User"]},function(t,e){t.exports=flarum.core.compat["helpers/icon"]},function(t,e){t.exports=flarum.core.compat["components/Modal"]},function(t,e){t.exports=flarum.core.compat["utils/ItemList"]},function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));var o=n(3),a=n(2),r=n(0),i=n.n(r),s=(n(13),function(t){function e(){return t.apply(this,arguments)||this}return Object(a.a)(e,t),e}(i.a));Object(o.a)(s.prototype,{id:i.a.attribute("id"),name:i.a.attribute("name"),description:i.a.attribute("description"),computation:i.a.attribute("computation"),points:i.a.attribute("points"),rectangle:i.a.attribute("rectangle"),image:i.a.attribute("image"),new:i.a.attribute("new"),active:i.a.attribute("active")})},,function(t,e,n){"use strict";n.r(e),n.d(e,"default",(function(){return p}));var o=n(0),a=n.n(o),r=n(5),i=n.n(r),s=n(9),c=n(3),u=n(2),m=function(t){function e(){return t.apply(this,arguments)||this}return Object(u.a)(e,t),e}(a.a);function p(){i.a.prototype.achievements=a.a.hasMany("achievements","achievement_user"),i.a.prototype.achievement_user=a.a.hasMany("achievement_user"),app.store.models.achievements=s.a,app.store.models.achievement_user=m}Object(c.a)(m.prototype,{achievement_id:a.a.attribute("achievement_id"),user_id:a.a.attribute("user_id"),new:a.a.attribute("new")})},function(t,e){t.exports=flarum.core.compat.extend},function(t,e){t.exports=flarum.core.compat["utils/mixin"]},function(t,e){t.exports=flarum.core.compat.app},function(t,e){t.exports=flarum.core.compat["components/CommentPost"]},function(t,e){t.exports=flarum.core.compat["common/Application"]},function(t,e){t.exports=flarum.core.compat["components/Page"]},,,,,function(t,e){t.exports=flarum.core.compat["components/Post"]},function(t,e){t.exports=flarum.core.compat["components/PostUser"]},function(t,e){t.exports=flarum.core.compat["components/ModalManager"]},function(t,e){t.exports=flarum.core.compat["components/TextEditor"]},function(t,e){t.exports=flarum.core.compat["components/PostEdited"]},function(t,e){t.exports=flarum.core.compat["components/IndexPage"]},,function(t,e,n){"use strict";n.r(e);var o=n(12),a=n(15),r=n.n(a),i=(n(22),n(23),n(24),n(0),n(5),n(25),n(26),n(9),n(16)),s=n.n(i),c=n(2),u=n(14),p=n.n(u),l=n(6),d=n.n(l),f=n(7),h=n.n(f),v=n(8),g=n.n(v),b=n(4),y=n.n(b),x=function(t){function e(){return t.apply(this,arguments)||this}Object(c.a)(e,t);var n=e.prototype;return n.title=function(){return p.a.translator.trans("malago-achievements.forum.new_achievement_title")},n.oninit=function(e){t.prototype.oninit.call(this,e)},n.fields=function(){for(var t=new g.a,e=0;e<this.attrs.achievements.length;e++){var n=this.attrs.achievements[e].rectangle.split(",");if(this.attrs.achievements[e].image.includes("http")){var o="background:url("+this.attrs.achievements[e].image+");                    background-position:-"+n[0]+"px -"+n[1]+"px;                    height:"+n[2]+"px;                    width:"+n[3]+"px;";t.add("image"+e,m("div",{className:"Form-group"},m("span",{class:"Badge Achievement",style:o})),-10)}else t.add("image"+e,m("div",{className:"Form-group"},m("span",{class:"Badge Achievement--Icon"},d()(this.attrs.achievements[e].image))),-10);t.add("name"+e,m("div",{className:"Form-group"},m("h1",null,this.attrs.achievements[e].name)),-10),t.add("description"+e,m("div",{className:"Form-group"},m("h3",null,this.attrs.achievements[e].description)),-10)}return t.add("close",m("div",{className:"NewAchievementModal--Button"},y.a.component({type:"button",className:"Button Button--primary",onclick:this.hide.bind(this)},p.a.translator.trans("malago-achievements.forum.new_achievement_close"))),-10),t},n.footer=function(){return null},n.content=function(){return this.loading?m("div",{className:"Modal-body"},m("div",{className:"Form"},m("div",{className:"container"},m(LoadingIndicator,null)))):m("div",{className:"Modal-body"},m("div",{className:"Modal--New-Achievement"},this.fields().toArray()))},e}(h.a),_=(n(27),n(17)),w=n.n(_),O=n(11).default;app.initializers.add("malago-achievements",(function(t){O(),Object(o.extend)(r.a.prototype,"oncreate",(function(e){var n="",o=0;this.attrs.post.data.attributes.isHidden||(this.attrs.post.data.attributes.achievements.forEach((function(t,e){var a=t.rectangle.split(",");if(t.image.includes("http")){var r="background:url("+t.image+");            background-position:-"+a[0]+"px -"+a[1]+"px;            height:"+a[2]+"px;            width:"+a[3]+"px;            margin: -"+(a[3]/4-4)+"px;";n+="<span class='Badge Achievement' style='"+r+"' data-toggle='tooltip' title='"+t.name+"'></span>"}else n+="<span class='Badge Achievement--Icon' data-toggle='tooltip' title='"+t.name+"'><i class='icon "+t.image+"'></i></span>";o+=t.points})),""!==n&&(o>0&&(n+="<span class='Achievement--Points' data-toggle='tooltip' title='"+t.translator.trans("malago-achievements.forum.achievement_points")+"'>"+t.translator.trans("malago-achievements.forum.achievement_points")+": <span class='Achievement--Points--Number'>"+o+"</span></span>"),$(this.element).find(".Post-body").after("<div class='Achievements--User'>"+n+"</div>"),$(".Achievement--Icon").tooltip(),$(".Achievement").tooltip(),$(".Achievement--Points").tooltip()))})),Object(o.extend)(s.a.prototype,"request",(function(e){e&&e.then((function(e){e&&void 0!==e.new_achievements&&null!==e.new_achievements&&e.new_achievements.length>0&&t.modal.show(x,{achievements:e.new_achievements})}))})),Object(o.extend)(w.a.prototype,"oncreate",(function(e){void 0!==t.session.user&&setTimeout((function(){var e=t.session.user.achievements();if(null!=e&&e.length>0){for(var n=[],o=0;o<e.length;o++)1==e[o].data.attributes.new&&(n.push(e[o].data.attributes),e[o].save({new:0,user_id:t.session.user.data.id}));n.length>0&&t.modal.show(x,{achievements:n})}}),1e3)}))}))}]);
//# sourceMappingURL=forum.js.map